!function(e){function t(){var e=document.createElement("input"),t="onpaste";return e.setAttribute(t,""),"function"==typeof e[t]?"paste":"input"}var n,a=t()+".mask",r=navigator.userAgent,i=/iphone/i.test(r),o=/android/i.test(r);e.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},dataName:"rawMaskFn",placeholder:"_"},e.fn.extend({caret:function(e,t){var n;if(0!==this.length&&!this.is(":hidden"))return"number"==typeof e?(t="number"==typeof t?t:e,this.each(function(){this.setSelectionRange?this.setSelectionRange(e,t):this.createTextRange&&(n=this.createTextRange(),n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",e),n.select())})):(this[0].setSelectionRange?(e=this[0].selectionStart,t=this[0].selectionEnd):document.selection&&document.selection.createRange&&(n=document.selection.createRange(),e=0-n.duplicate().moveStart("character",-1e5),t=e+n.text.length),{begin:e,end:t})},unmask:function(){return this.trigger("unmask")},mask:function(t,r){var s,l,c,u,f,d;return!t&&this.length>0?(s=e(this[0]),s.data(e.mask.dataName)()):(r=e.extend({placeholder:e.mask.placeholder,completed:null},r),l=e.mask.definitions,c=[],u=d=t.length,f=null,e.each(t.split(""),function(e,t){"?"==t?(d--,u=e):l[t]?(c.push(new RegExp(l[t])),null===f&&(f=c.length-1)):c.push(null)}),this.trigger("unmask").each(function(){function s(e){for(;++e<d&&!c[e];);return e}function v(e){for(;--e>=0&&!c[e];);return e}function h(e,t){var n,a;if(!(0>e)){for(n=e,a=s(t);d>n;n++)if(c[n]){if(!(d>a&&c[n].test(x[a])))break;x[n]=x[a],x[a]=r.placeholder,a=s(a)}k(),y.caret(Math.max(f,e))}}function p(e){var t,n,a,i;for(t=e,n=r.placeholder;d>t;t++)if(c[t]){if(a=s(t),i=x[t],x[t]=n,!(d>a&&c[a].test(i)))break;n=i}}function g(e){var t,n,a,r=e.which;8===r||46===r||i&&127===r?(t=y.caret(),n=t.begin,a=t.end,0===a-n&&(n=46!==r?v(n):a=s(n-1),a=46===r?s(a):a),b(n,a),h(n,a-1),e.preventDefault()):27==r&&(y.val(R),y.caret(0,w()),e.preventDefault())}function m(t){var n,a,i,l=t.which,u=y.caret();t.ctrlKey||t.altKey||t.metaKey||32>l||l&&(0!==u.end-u.begin&&(b(u.begin,u.end),h(u.begin,u.end-1)),n=s(u.begin-1),d>n&&(a=String.fromCharCode(l),c[n].test(a)&&(p(n),x[n]=a,k(),i=s(n),o?setTimeout(e.proxy(e.fn.caret,y,i),0):y.caret(i),r.completed&&i>=d&&r.completed.call(y))),t.preventDefault())}function b(e,t){var n;for(n=e;t>n&&d>n;n++)c[n]&&(x[n]=r.placeholder)}function k(){y.val(x.join(""))}function w(e){var t,n,a=y.val(),i=-1;for(t=0,pos=0;d>t;t++)if(c[t]){for(x[t]=r.placeholder;pos++<a.length;)if(n=a.charAt(pos-1),c[t].test(n)){x[t]=n,i=t;break}if(pos>a.length)break}else x[t]===a.charAt(pos)&&t!==u&&(pos++,i=t);return e?k():u>i+1?(y.val(""),b(0,d)):(k(),y.val(y.val().substring(0,i+1))),u?t:f}var y=e(this),x=e.map(t.split(""),function(e){return"?"!=e?l[e]?r.placeholder:e:void 0}),R=y.val();y.data(e.mask.dataName,function(){return e.map(x,function(e,t){return c[t]&&e!=r.placeholder?e:null}).join("")}),y.attr("readonly")||y.one("unmask",function(){y.unbind(".mask").removeData(e.mask.dataName)}).bind("focus.mask",function(){clearTimeout(n);var e;R=y.val(),e=w(),n=setTimeout(function(){k(),e==t.length?y.caret(0,e):y.caret(e)},10)}).bind("blur.mask",function(){w(),y.val()!=R&&y.change()}).bind("keydown.mask",g).bind("keypress.mask",m).bind(a,function(){setTimeout(function(){var e=w(!0);y.caret(e),r.completed&&e==y.val().length&&r.completed.call(y)},0)}),w()}))}})}(jQuery),function(e){"use strict";e.browser||(e.browser={},e.browser.mozilla=/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase()),e.browser.webkit=/webkit/.test(navigator.userAgent.toLowerCase()),e.browser.opera=/opera/.test(navigator.userAgent.toLowerCase()),e.browser.msie=/msie/.test(navigator.userAgent.toLowerCase()));var t={destroy:function(){return e(this).unbind(".maskMoney"),e.browser.msie&&(this.onpaste=null),this},mask:function(t){return this.each(function(){var n,a=e(this);return"number"==typeof t&&(a.trigger("mask"),n=e(a.val().split(/\D/)).last()[0].length,t=t.toFixed(n),a.val(t)),a.trigger("mask")})},unmasked:function(){return this.map(function(){var t,n=e(this).val()||"0",a=-1!==n.indexOf("-");return e(n.split(/\D/).reverse()).each(function(e,n){return n?(t=n,!1):void 0}),n=n.replace(/\D/g,""),n=n.replace(new RegExp(t+"$"),"."+t),a&&(n="-"+n),parseFloat(n)})},init:function(t){return t=e.extend({prefix:"",suffix:"",affixesStay:!0,thousands:",",decimal:".",precision:2,allowZero:!1,allowNegative:!1},t),this.each(function(){function n(){var e,t,n,a,r,i=k.get(0),o=0,s=0;return"number"==typeof i.selectionStart&&"number"==typeof i.selectionEnd?(o=i.selectionStart,s=i.selectionEnd):(t=document.selection.createRange(),t&&t.parentElement()===i&&(a=i.value.length,e=i.value.replace(/\r\n/g,"\n"),n=i.createTextRange(),n.moveToBookmark(t.getBookmark()),r=i.createTextRange(),r.collapse(!1),n.compareEndPoints("StartToEnd",r)>-1?o=s=a:(o=-n.moveStart("character",-a),o+=e.slice(0,o).split("\n").length-1,n.compareEndPoints("EndToEnd",r)>-1?s=a:(s=-n.moveEnd("character",-a),s+=e.slice(0,s).split("\n").length-1)))),{start:o,end:s}}function a(){var e=!(k.val().length>=k.attr("maxlength")&&k.attr("maxlength")>=0),t=n(),a=t.start,r=t.end,i=t.start!==t.end&&k.val().substring(a,r).match(/\d/)?!0:!1,o="0"===k.val().substring(0,1);return e||i||o}function r(e){k.each(function(t,n){if(n.setSelectionRange)n.focus(),n.setSelectionRange(e,e);else if(n.createTextRange){var a=n.createTextRange();a.collapse(!0),a.moveEnd("character",e),a.moveStart("character",e),a.select()}})}function i(e){var n="";return e.indexOf("-")>-1&&(e=e.replace("-",""),n="-"),n+t.prefix+e+t.suffix}function o(e){var n,a,r,o=e.indexOf("-")>-1&&t.allowNegative?"-":"",s=e.replace(/[^0-9]/g,""),l=s.slice(0,s.length-t.precision);return l=l.replace(/^0*/g,""),l=l.replace(/\B(?=(\d{3})+(?!\d))/g,t.thousands),""===l&&(l="0"),n=o+l,t.precision>0&&(a=s.slice(s.length-t.precision),r=new Array(t.precision+1-a.length).join(0),n+=t.decimal+r+a),i(n)}function s(e){var t,n=k.val().length;k.val(o(k.val())),t=k.val().length,e-=n-t,r(e)}function l(){var e=k.val();k.val(o(e))}function c(){var e=k.val();return t.allowNegative?""!==e&&"-"===e.charAt(0)?e.replace("-",""):"-"+e:e}function u(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function f(t){t=t||window.event;var r,i,o,l,f,d=t.which||t.charCode||t.keyCode;return void 0===d?!1:48>d||d>57?45===d?(k.val(c()),!1):43===d?(k.val(k.val().replace("-","")),!1):13===d||9===d?!0:!e.browser.mozilla||37!==d&&39!==d||0!==t.charCode?(u(t),!0):!0:a()?(u(t),r=String.fromCharCode(d),i=n(),o=i.start,l=i.end,f=k.val(),k.val(f.substring(0,o)+r+f.substring(l,f.length)),s(o+1),!1):!1}function d(e){e=e||window.event;var a,r,i,o,l,c=e.which||e.charCode||e.keyCode;return void 0===c?!1:(a=n(),r=a.start,i=a.end,8===c||46===c||63272===c?(u(e),o=k.val(),r===i&&(8===c?""===t.suffix?r-=1:(l=o.split("").reverse().join("").search(/\d/),r=o.length-l-1,i=r+1):i+=1),k.val(o.substring(0,r)+o.substring(i,o.length)),s(r),!1):9===c?!0:!0)}function v(){b=k.val(),l();var e,t=k.get(0);t.createTextRange&&(e=t.createTextRange(),e.collapse(!1),e.select())}function h(){setTimeout(function(){l()},0)}function p(){var e=parseFloat("0")/Math.pow(10,t.precision);return e.toFixed(t.precision).replace(new RegExp("\\.","g"),t.decimal)}function g(n){if(e.browser.msie&&f(n),""===k.val()||k.val()===i(p()))t.allowZero?t.affixesStay?k.val(i(p())):k.val(p()):k.val("");else if(!t.affixesStay){var a=k.val().replace(t.prefix,"").replace(t.suffix,"");k.val(a)}k.val()!==b&&k.change()}function m(){var e,t=k.get(0);t.setSelectionRange?(e=k.val().length,t.setSelectionRange(e,e)):k.val(k.val())}var b,k=e(this);t=e.extend(t,k.data()),k.unbind(".maskMoney"),k.bind("keypress.maskMoney",f),k.bind("keydown.maskMoney",d),k.bind("blur.maskMoney",g),k.bind("focus.maskMoney",v),k.bind("click.maskMoney",m),k.bind("cut.maskMoney",h),k.bind("paste.maskMoney",h),k.bind("mask.maskMoney",l)})}};e.fn.maskMoney=function(n){return t[n]?t[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?(e.error("Method "+n+" does not exist on jQuery.maskMoney"),void 0):t.init.apply(this,arguments)}}(window.jQuery||window.Zepto);